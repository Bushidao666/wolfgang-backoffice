# Backoffice API (Nest.js) - exemplo de variáveis de ambiente
# Copie para `backoffice-api/.env` se for rodar localmente sem Docker.

PORT=4000
NODE_ENV=development
SERVICE_NAME=backoffice-api

# Infra
REDIS_URL=redis://localhost:6380
CORS_ORIGIN=http://localhost:3000

# Supabase
SUPABASE_URL=http://localhost:54321
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_JWT_SECRET=

# (Opcional) conexão Postgres direta (não é necessária para a maioria das rotas)
# Em Supabase Cloud, a URL direta é IPv6 por padrão.
# Em ambientes sem IPv6 (ex.: Railway), prefira a URL do Pooler.
SUPABASE_DB_URL=postgresql://postgres:<DB_PASSWORD>@db.<PROJECT_REF>.supabase.co:5432/postgres

# Auth
JWT_SECRET=dev-secret

# Integrações / serviços internos
AGENT_RUNTIME_URL=http://localhost:5000
AUTENTIQUE_SERVICE_URL=http://localhost:4002
# Token para chamadas internas (Backoffice API -> Autentique Service)
INTERNAL_API_TOKEN=
AUTENTIQUE_SERVICE_INTERNAL_TOKEN=

# OpenAI (usado para embeddings na Knowledge Base)
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# KB tuning / workers
DISABLE_WORKERS=false
KB_PROCESSOR_INTERVAL_MS=10000
KB_CHUNK_WORDS=500
KB_CHUNK_OVERLAP=50
KB_EMBED_BATCH=32

# Facebook CAPI
FACEBOOK_API_VERSION=v20.0
APP_ENCRYPTION_KEY_CURRENT=
APP_ENCRYPTION_KEY_PREVIOUS=
APP_ENCRYPTION_KEY=

# Observabilidade (opcional)
OTEL_TRACING_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces
